[
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Stock Entry",
  "enabled": 0,
  "modified": "2025-11-11 12:40:39.233743",
  "module": null,
  "name": "stock entry for quarantine warehouse",
  "script": "// Client Script (Stock Entry) — robust\r\nfrappe.ui.form.on('Stock Entry', {\r\n    onload: function(frm) {\r\n        run_check(frm);\r\n    },\r\n    refresh: function(frm) {\r\n        run_check(frm);\r\n    },\r\n    from_warehouse: function(frm) {\r\n        run_check(frm);\r\n    },\r\n    to_warehouse: function(frm) {\r\n        run_check(frm);\r\n    },\r\n    validate: function(frm) {\r\n        run_check(frm);\r\n    }\r\n});\r\n\r\nfrappe.ui.form.on('Stock Entry Detail', {\r\n    s_warehouse: function(frm, cdt, cdn) { run_check(frm); },\r\n    t_warehouse: function(frm, cdt, cdn) { run_check(frm); },\r\n    items_add: function(frm) { run_check(frm); }\r\n});\r\n\r\nfunction run_check(frm) {\r\n    try {\r\n        // 1) جمع‌آوری همهٔ نام‌های انبار (link values)\r\n        let whs = new Set();\r\n        if (frm.doc.from_warehouse) whs.add(frm.doc.from_warehouse);\r\n        if (frm.doc.to_warehouse) whs.add(frm.doc.to_warehouse);\r\n        if (Array.isArray(frm.doc.items)) {\r\n            frm.doc.items.forEach(r => {\r\n                if (r.s_warehouse) whs.add(r.s_warehouse);\r\n                if (r.t_warehouse) whs.add(r.t_warehouse);\r\n            });\r\n        }\r\n\r\n        if (whs.size === 0) {\r\n            console.log('[inspection] no warehouses selected => clearing inspection_required');\r\n            set_inspection_value(frm, 0);\r\n            return;\r\n        }\r\n\r\n        // 2) برای هر انبار، از سرور نام‌های معنادار را بگیر (warehouse_name, name, warehouse_code اگر هست)\r\n        let promises = [];\r\n        whs.forEach(wh => {\r\n            promises.push(\r\n                frappe.call({\r\n                    method: 'frappe.client.get',\r\n                    args: {doctype: 'Warehouse', name: wh},\r\n                    freeze: false\r\n                }).then(res => {\r\n                    const msg = res && res.message ? res.message : null;\r\n                    let combined = '';\r\n                    if (msg) {\r\n                        combined = [\r\n                            msg.warehouse_name || '',\r\n                            msg.name || '',\r\n                            msg.warehouse_code || ''\r\n                        ].join(' ').toString().toLowerCase();\r\n                    } else {\r\n                        combined = (wh || '').toString().toLowerCase();\r\n                    }\r\n                    let found = combined.indexOf('قرنطینه') !== -1;\r\n                    console.log('[inspection] checked', wh, '-> combined:', combined, '-> contains quarantine:', found);\r\n                    return found;\r\n                }).catch(err => {\r\n                    console.warn('[inspection] error get Warehouse', wh, err);\r\n                    // در صورت خطا فرض می‌کنیم false تا کار متوقف نشود\r\n                    return false;\r\n                })\r\n            );\r\n        });\r\n\r\n        Promise.all(promises).then(results => {\r\n            const any = results.some(x => x === true);\r\n            set_inspection_value(frm, any ? 1 : 0);\r\n            console.log('[inspection] final decision =', any);\r\n        });\r\n\r\n    } catch (e) {\r\n        console.error('[inspection] unexpected error', e);\r\n    }\r\n}\r\n\r\nfunction set_inspection_value(frm, val) {\r\n    // بررسی نام فیلد: اگر موجود نیست چند جایگزین را امتحان کن\r\n    const candidates = ['inspection_required','is_inspection_required','inspection_required_1','inspection_required_flag'];\r\n    // اگر فیلد مشخص وجود داشت مستقیم ست کن\r\n    if (frm.fields_dict && frm.fields_dict['inspection_required']) {\r\n        frm.set_value('inspection_required', val);\r\n        return;\r\n    }\r\n    // در غیر اینصورت سعی کن اولین نام موجود را ست کنی\r\n    for (let name of candidates) {\r\n        if (frm.fields_dict && frm.fields_dict[name]) {\r\n            frm.set_value(name, val);\r\n            console.log('[inspection] set', name, '=>', val);\r\n            return;\r\n        }\r\n    }\r\n    // اگر هیچ فیلدی پیدا نشد، فقط لاگ کن\r\n    console.warn('[inspection] no matching fieldname found in form for inspection flag. Tried:', candidates);\r\n}\r\n",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Material Request",
  "enabled": 0,
  "modified": "2025-11-17 15:28:06.490932",
  "module": null,
  "name": "material request script",
  "script": "frappe.ui.form.on('Material Request', {\r\n    refresh: function(frm) {\r\n        if (frm.doc.workflow_state) {\r\n            frm.set_value('custom_workflow_display', frm.doc.workflow_state);\r\n        }\r\n    },\r\n    workflow_state: function(frm) {\r\n        if (frm.doc.workflow_state) {\r\n            frm.set_value('custom_workflow_display', frm.doc.workflow_state);\r\n        }\r\n    },\r\n    validate: function(frm) {\r\n        if (frm.doc.workflow_state) {\r\n            frm.set_value('custom_workflow_display', frm.doc.workflow_state);\r\n        }\r\n    }\r\n});\r\n",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Material Request",
  "enabled": 0,
  "modified": "2025-12-02 12:33:36.415633",
  "module": null,
  "name": "عدم ثبت با گروه کالاهای متفاوت",
  "script": "",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Asset Request",
  "enabled": 1,
  "modified": "2025-11-15 15:21:55.398879",
  "module": "Assets",
  "name": "ارجاع درخواست دارایی به فرمهای مربوطه",
  "script": "frappe.ui.form.on('Asset Request', {\r\n    refresh: function(frm) {\r\n        // فقط برای مسئول اموال و وقتی فرم Submit شده (docstatus = 1)\r\n        if (\r\n            frappe.user.has_role('Asset Manager') && \r\n            frm.doc.docstatus === 1\r\n        ) {\r\n            // دکمه ارجاع به خرید (وقتی هنوز سند ثبت نشده)\r\n            if (!frm.doc.linked_material_request) {\r\n                frm.add_custom_button('ارجاع به خرید', function() {\r\n                    frappe.call({\r\n                        method: \"frappe.client.insert\",\r\n                        args: {\r\n                            doc: {\r\n                                doctype: \"Material Request\",\r\n                                material_request_type: \"Purchase\",\r\n                                company: frm.doc.company,\r\n                                schedule_date: frm.doc.required_date || frappe.datetime.nowdate(),\r\n                                items: [\r\n                                    {\r\n                                        item_code: frm.doc.asset_item || frm.doc.amended_from, // اسم فیلد دقیق شما (دارایی) هرچی هست بگذار\r\n                                        qty: frm.doc.quantity,\r\n                                        schedule_date: frm.doc.required_date || frappe.datetime.nowdate()\r\n                                    }\r\n                                ],\r\n                                asset_request_ref: frm.doc.name\r\n                            }\r\n                        },\r\n                        callback: function(response) {\r\n                            if (response.message) {\r\n                                frm.set_value('linked_material_request', response.message.name);\r\n                                frappe.msgprint(\"درخواست خرید ثبت شد: <a href='/app/material-request/\" + response.message.name + \"'>\" + response.message.name + \"</a>\");\r\n                                frm.save();\r\n                            } else {\r\n                                frappe.msgprint(\"خطا در ثبت درخواست خرید!\");\r\n                            }\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n\r\n            // دکمه تخصیص از موجودی (وقتی هنوز Movement ثبت نشده)\r\n            if (!frm.doc.linked_asset_movement) {\r\n                frm.add_custom_button('تخصیص از موجودی', function() {\r\n                    frappe.call({\r\n                        method: \"frappe.client.insert\",\r\n                        args: {\r\n                            doc: {\r\n                                doctype: \"Asset Movement\",\r\n                                purpose: \"Transfer\",\r\n                                company: frm.doc.company,\r\n                                asset: frm.doc.amended_from,\r\n                                quantity: frm.doc.quantity,\r\n                                to_department: frm.doc.department,\r\n                                transaction_date: frappe.datetime.nowdate(),\r\n                                asset_request_ref: frm.doc.name\r\n                            }\r\n                        },\r\n                        callback: function(response) {\r\n                            if (response.message) {\r\n                                frm.set_value('linked_asset_movement', response.message.name);\r\n                                frappe.msgprint(\"تخصیص انجام شد: <a href='/app/asset-movement/\" + response.message.name + \"'>\" + response.message.name + \"</a>\");\r\n                                frm.save();\r\n                            } else {\r\n                                frappe.msgprint(\"خطا در تخصیص!\");\r\n                            }\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n        }\r\n    }\r\n});",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Asset Request",
  "enabled": 1,
  "modified": "2025-11-15 16:35:03.042800",
  "module": "Assets",
  "name": "محدود کردن جستجوی دارایی در آیتمها",
  "script": "frappe.ui.form.on(\"Asset Request\", {\n    onload: function(frm) {\n        frm.set_query(\"asset_item\", function() {\n            return {\n                filters: { is_fixed_asset: 1 }\n            }\n        });\n    }\n});",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Purchase Order",
  "enabled": 0,
  "modified": "2025-11-19 15:05:18.936506",
  "module": "Buying",
  "name": "جلوگیری از ایجاد سفارش خرید در صورت نداشتن اعتبارسنجی مالی",
  "script": "frappe.ui.form.on('Purchase Order', {\r\n    validate: function(frm) {\r\n        if(frm.doc.supplier){\r\n            frappe.call({\r\n                method: 'frappe.client.get',\r\n                args: {\r\n                    doctype: 'Supplier',\r\n                    name: frm.doc.supplier\r\n                },\r\n                async: false, // ضروری که عملیات سینک باشد و ذخیره متوقف شود\r\n                callback: function(r) {\r\n                    if(r.message){\r\n                        var verification_status = r.message.custom_financial_verification_status;\r\n                        var valid_till = r.message.custom_verification_valid_till;\r\n                        var today = frappe.datetime.get_today();\r\n\r\n                        // اگر وضعیت تایید نیست یا تاریخ منقضی شده باشد، جلو ذخیره را بگیر\r\n                        if (verification_status != 'Verified') {  // فرض اینکه مقدار صحیح حالت تایید، \"Verified\" باشد\r\n                            frappe.msgprint(__('This Supplier has not been financially verified.'));\r\n                            frappe.validated = false;\r\n                        } else if (valid_till && valid_till < today) {\r\n                            frappe.msgprint(__('The financial verification for this Supplier has expired.'));\r\n                            frappe.validated = false;\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n});",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Material Request",
  "enabled": 1,
  "modified": "2025-11-22 14:28:54.373121",
  "module": null,
  "name": "تاریخ درخواست خرید بعد از لیدتایم هر کالا باشد",
  "script": "frappe.ui.form.on('Material Request', {\r\n    validate: function(frm) {\r\n        var error_flag = false;\r\n\r\n        $.each(frm.doc.items || [], function(i, row) {\r\n            if(row.item_code && row.schedule_date){\r\n                frappe.call({\r\n                    method: \"frappe.client.get_value\",\r\n                    args: {\r\n                        doctype: \"Item\",\r\n                        filters: { name: row.item_code },\r\n                        fieldname: \"lead_time_days\"\r\n                    },\r\n                    async: false,\r\n                    callback: function(response) {\r\n                        var lead_time = response.message && response.message.lead_time_days;\r\n                        if(lead_time && !isNaN(lead_time)) {\r\n                            var today = frappe.datetime.get_today();\r\n                            var min_needed_date = frappe.datetime.add_days(today, parseInt(lead_time));\r\n                            if(row.schedule_date < min_needed_date){\r\n                                error_flag = true;\r\n                                frappe.msgprint(__('Row #{0}: Required Date ({1}) cannot be less than Today + Lead Time ({2} days) = {3} for item {4}',\r\n                                    [row.idx, row.schedule_date, lead_time, min_needed_date, row.item_code]\r\n                                ));\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        });\r\n\r\n        if(error_flag) {\r\n            frappe.validated = false;\r\n        }\r\n    }\r\n});",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Material Request",
  "enabled": 0,
  "modified": "2025-11-26 14:28:10.612946",
  "module": null,
  "name": "material request list-view",
  "script": "frappe.listview_settings['Material Request'] = {\r\n    onload(listview) {\r\n\r\n        if (!frappe.user_roles.includes(\"Purchase Manager\")) return;\r\n\r\n        listview.list_route_options = {\r\n            filters: [\r\n                [\"Material Request\", \"owner\", \"=\", frappe.session.user]\r\n            ],\r\n            or_filters: [\r\n                [\"Material Request\", \"purpose\", \"=\", \"Purchase\"]\r\n            ]\r\n        };\r\n    }\r\n};\r\n",
  "view": "List"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Asset",
  "enabled": 1,
  "modified": "2025-11-30 18:20:18.923220",
  "module": null,
  "name": "stock user asset view",
  "script": "frappe.ui.form.on(\"Asset\", {\r\n    refresh(frm) {\r\n\r\n        // اگر کاربر نقش Stock User دارد\r\n        if (frappe.user_roles.includes(\"Stock User\")) {\r\n\r\n            // مخفی کردن کامل Insurance Details\r\n            if (frm.fields_dict[\"insurance_details\"]) {\r\n                $(frm.fields_dict[\"insurance_details\"].wrapper).hide();\r\n            }\r\n\r\n            // مخفی کردن کامل Maintenance (section_break_31)\r\n            if (frm.fields_dict[\"section_break_31\"]) {\r\n                $(frm.fields_dict[\"section_break_31\"].wrapper).hide();\r\n            }\r\n            \r\n             // مخفی کردن کامل Depreciation section_break_23sb)\r\n            if (frm.fields_dict[\"section_break_23\"]) {\r\n                $(frm.fields_dict[\"section_break_23\"].wrapper).hide();\r\n            }\r\n        }\r\n    }\r\n});\r\n",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Material Request",
  "enabled": 0,
  "modified": "2025-12-01 11:45:27.804949",
  "module": null,
  "name": "material",
  "script": "frappe.listview_settings['Material Request'] = {\r\n    onload: function(listview) {\r\n        // پاک کردن فیلترهای قبلی\r\n        listview.filter_area.clear();\r\n\r\n        // اعمال فیلتر فقط روی \"Purchase\"\r\n        listview.filter_area.add([\r\n            ['Material Request', 'material_request_type', '=', 'Purchase']\r\n        ]);\r\n\r\n        // غیرقابل تغییر کردن فیلتر\r\n        const filter = listview.filter_area.get_filter('material_request_type');\r\n        if(filter){\r\n            filter.df.read_only = 1;\r\n            filter.refresh();\r\n        }\r\n\r\n        // تضمین پابرجا بودن فیلتر\r\n        listview.get_filters = function() {\r\n            return {'material_request_type': 'Purchase'};\r\n        }\r\n    }\r\n};\r\n",
  "view": "List"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Material Request",
  "enabled": 1,
  "modified": "2025-12-02 12:52:31.691771",
  "module": null,
  "name": "material request- state",
  "script": "frappe.ui.form.on('Material Request', {\r\n    refresh(frm) {\r\n        let wf_state = frm.doc.workflow_state ? frm.doc.workflow_state : \"None\";\r\n        let sys_state = frm.doc.status ? frm.doc.status : \"None\";\r\n\r\n        // تعریف رنگ‌ها بر اساس مقدار وضعیت\r\n        let wf_color = 'background:#17a2b8;color:#fff';       // آبی فیروزه‌ای\r\n        let sys_color = 'background:#28a745;color:#fff';      // سبز پیش‌فرض\r\n        if (sys_state === \"Draft\") sys_color = 'background:#6c757d;color:#fff'; // خاکستری برای Draft\r\n        if (sys_state === \"Cancelled\") sys_color = 'background:#dc3545;color:#fff'; // قرمز برای Cancelled\r\n\r\n        if (sys_state === \"Draft\") {\r\n            frm.dashboard.set_headline(\r\n                '<span style=\"padding:2px 14px; border-radius:6px; '+wf_color+'; font-weight:bold;\">'\r\n                + 'Workflow State: ' + wf_state +\r\n                '</span>'\r\n            );\r\n        } else {\r\n            frm.dashboard.set_headline(\r\n                '<span style=\"padding:2px 14px; border-radius:6px; '+wf_color+'; font-weight:bold;margin-right:7px;\">'\r\n                + 'Workflow State: ' + wf_state +\r\n                '</span>' +\r\n                '<span style=\"padding:2px 14px; border-radius:6px; '+sys_color+'; font-weight:bold;\">'\r\n                + 'System Status: ' + sys_state +\r\n                '</span>'\r\n            );\r\n        }\r\n    }\r\n});",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Material Request",
  "enabled": 1,
  "modified": "2025-12-02 12:34:18.609709",
  "module": null,
  "name": "عدم ثبت Material request با approver role های متفاوت",
  "script": "frappe.ui.form.on('Material Request', {\r\n    validate: function(frm) {\r\n        // اگر هیچ آیتمی انتخاب نشده، خروج\r\n        if (!frm.doc.items || frm.doc.items.length === 0) return;\r\n\r\n        // لیست کد همه آیتم ها\r\n        let item_codes = frm.doc.items.map(row => row.item_code).filter(Boolean);\r\n\r\n        if (item_codes.length === 0) return;\r\n\r\n        // فراخوانی سمت سرور (سینک برای راحتی تست — اگر سلسله کار async لازم بود اطلاع بده)\r\n        frappe.call({\r\n            method: \"frappe.client.get_list\",\r\n            args: {\r\n                doctype: \"Item\",\r\n                fields: [\"name\", \"custom_approver_role\"],\r\n                filters: { name: [\"in\", item_codes] },\r\n                limit_page_length: item_codes.length\r\n            },\r\n            async: false,\r\n            callback: function(r) {\r\n                if (r.message) {\r\n                    // همه approver_role آیتم ها را استخراج کن\r\n                    let roles = r.message.map(row => row.custom_approver_role).filter(Boolean);\r\n                    // اگر کسی خالی بود (یعنی یک کالا approver role ندارد) می‌توانی خطا بدهی! یا بگذری.\r\n                    if (roles.length !== item_codes.length) {\r\n                        frappe.msgprint('One or more of the selected items has no approver role defined.');\r\n                        frappe.validated = false;\r\n                        return;\r\n                    }\r\n                    // یونیک کردن نقش‌ها\r\n                    let unique_roles = [...new Set(roles)];\r\n                    if (unique_roles.length > 1) {\r\n                        frappe.msgprint('All selected items must have the same Approver Role (from Item Master).');\r\n                        frappe.validated = false;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n});",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Material Request",
  "enabled": 1,
  "modified": "2025-12-02 13:07:53.111474",
  "module": null,
  "name": "مخفی کردن دکمه ی create",
  "script": "frappe.ui.form.on('Material Request', {\r\n    refresh(frm) {\r\n        let is_submitted = frm.doc.docstatus === 1;\r\n        let wf = frm.doc.workflow_state;\r\n        console.log(\"workflow_state:\", wf); // خط اشکال‌زدایی\r\n\r\n        // اگر سند سابمیت شده باشد و وضعیت دقیقا Pending نباشد => حذف دکمه Create\r\n        if (is_submitted && wf !== \"Pending\") {\r\n            setTimeout(function() {\r\n                // حذف منوی Create\r\n                frm.page.remove_inner_button(\"Create\");\r\n                // حذف کل زیرمنوی Create: نام دکمه‌ها را با دکمه‌هایی که نمایش داده می‌شود ست کن\r\n                ([\r\n                    \"Issue Material\",\r\n                    \"Purchase Order\",\r\n                    \"Supplier Quotation\",\r\n                    \"Request for Quotation\",\r\n                    \"Stock Entry\",\r\n                    \"Request for Purchase\"\r\n                ]).forEach(function(btn){\r\n                    frm.remove_custom_button(btn, \"Create\");\r\n                    frm.remove_custom_button(btn);\r\n                });\r\n            }, 300);\r\n        }\r\n    }\r\n});",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Purchase Order",
  "enabled": 1,
  "modified": "2025-12-03 11:59:45.004587",
  "module": null,
  "name": "نمایش فیلد شماره پیگیری",
  "script": "frappe.ui.form.on('Purchase Order', {\r\n    refresh(frm) {\r\n        set_tracking_no_required_field(frm);\r\n    },\r\n    validate(frm) {\r\n        if (\r\n            frm.doc.docstatus === 1 &&\r\n            frm._supplier_not_iran &&\r\n            (!frm.doc.custom_tracking_no || frm.doc.custom_tracking_no.trim() === \"\")\r\n        ) {\r\n            frappe.msgprint(__('Please enter Tracking Number (required for non-Iranian supplier after submit).'));\r\n            frappe.validated = false;\r\n        }\r\n    },\r\n    before_workflow_action(frm) {\r\n        if (\r\n            frm.doc.docstatus === 1 &&\r\n            frm._supplier_not_iran &&\r\n            (!frm.doc.custom_tracking_no || frm.doc.custom_tracking_no.trim() === \"\")\r\n        ) {\r\n            frappe.msgprint(__('Please enter Tracking Number (required for non-Iranian supplier after submit).'));\r\n            return Promise.reject();\r\n        }\r\n    },\r\n    supplier: function(frm) {\r\n        set_tracking_no_required_field(frm);\r\n    }\r\n});\r\n\r\nfunction set_tracking_no_required_field(frm) {\r\n    if (!frm.doc.supplier) {\r\n        frm.set_df_property('custom_tracking_no', 'reqd', 0);\r\n        return;\r\n    }\r\n    // واکشی کشور تامین‌کننده به صورت async\r\n    frappe.db.get_value('Supplier', frm.doc.supplier, 'country', function(r) {\r\n        if (r && r.country && r.country !== \"Iran\") {\r\n            frm._supplier_not_iran = true;\r\n            if(frm.doc.docstatus === 1) {\r\n                frm.set_df_property('custom_tracking_no', 'reqd', 1);\r\n            }\r\n        } else {\r\n            frm._supplier_not_iran = false;\r\n            frm.set_df_property('custom_tracking_no', 'reqd', 0);\r\n        }\r\n    });\r\n}",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Purchase Order",
  "enabled": 1,
  "modified": "2025-12-02 16:22:49.984452",
  "module": null,
  "name": "اجباری کردن فایل پیوست در state خاص",
  "script": "frappe.ui.form.on('Purchase Order', {\r\n    before_workflow_action: function(frm) {\r\n        // نام state مورد نظر خودت را قرار بده\r\n        if (\r\n            frm.doc.workflow_state === \"Assigning Bank for Currency Allocation\"\r\n        ) {\r\n            // تعداد پیوست‌های فایل را چک کن\r\n            let attachments = frm.attachments ? frm.attachments.get_attachments() : [];\r\n            if (!attachments.length) {\r\n                frappe.msgprint(__('You must attach at least one file before proceeding.'));\r\n                return Promise.reject();\r\n            }\r\n        }\r\n    }\r\n});",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Material Request",
  "enabled": 1,
  "modified": "2025-12-02 23:24:44.371582",
  "module": null,
  "name": "hhhh",
  "script": "frappe.listview_settings['Material Request'].get_filters = function(listview) {\r\n    if (frappe.user.has_role('Purchase Manager')) {\r\n        return [\r\n            ['Material Request', 'owner', '=', frappe.session.user],\r\n            ['Material Request', 'purpose', '=', 'Purchase']\r\n        ];\r\n    }\r\n};",
  "view": "List"
 }
]